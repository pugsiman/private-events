<h1><%= @event.title %></h1>
<div class="row">
  <div class="col-md-4 col-md-offset-1">
    <h4>Users attending: </h4>
    <ul class="list-group">
      <% @event.attendees.each do |attendee| %>
          <li class="list-group-item">
            <%= link_to attendee.name, user_path(attendee) %>
          </li>
      <% end %>
    </ul>
  </div>

  <% if current_user != nil %>
    <% if current_user == @event.creator %>
      <div class="col-md-4 col-sm-12">
        <%= link_to "Edit", edit_event_path(@event), class: 'btn btn-block btn-warning' %>
      </div>
      <br>
      <div class="col-md-4 col-sm-12">
        <%= link_to "Delete Event", @event, method: :delete,
                                            data: {confirm: 'Delete?'},
                                            class: 'btn btn-block btn-danger' %>
      </div>
    <% end %>

    <% unless current_user == @event.creator %>
      <% if current_user.attended_events.include? @event %>
          <div class="col-md-4 col-sm-12">
            <%= link_to "Cancel Attendance", current_user.invitations.find_by(event_id: @event.id), method: :delete, data:{confirm: "Are you sure?"}, class: 'btn btn-block btn-danger' %>
          </div>
      <% else %>
          <div class="col-md-4 col-sm-12">
            <%= form_for(current_user.invitations.build(event_id: @event.id)) do |f| %>
                <%= f.hidden_field :event_id, value: @event.id %>
                <%= f.submit "Attend", class: 'btn btn-block btn-success', id:"attend-button" %>
            <% end %>
          </div>
      <% end %>
    <% end %>
  <% end %>
</div>
